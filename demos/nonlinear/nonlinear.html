<!doctype>
<html>
<head>
	<title>nonlinear!</title>
	<link rel="stylesheet" type="text/css" href="../../dist/improv-default.css">
	<link rel="stylesheet" type="text/css" href="nonlinear.css">
</head>
<body>

<div id="sidebar">

	<div id="editor">
	Let's start off with these numbers:
	{ACTIONS start}

	<br>
	Then for each of {NUMBER cycles: min=1,max=1000} cycles, do this:
	{ACTIONS cycle}
	</div>

</div>
<div id="model_container">
	<svg id="model"></svg>
</div>

</body>
</html>

<!-- IMPROV.JS -->
<script src="../../dist/improv.js"></script>
<script src="../../dist/improv-widgets.js"></script>
<script src="../../dist/improv-widgets-vars.js"></script>

<!-- Nonlinear Scripts -->
<script src="snap.svg-min.js"></script>
<script src="nonlinear.js"></script>
<script src="nonlinear-improv.js"></script>

<!-- Test -->
<script>

INIT({
	_vars_:[
		{ id:"AAA", type:"number", name:"rabbits" },
		{ id:"BBB", type:"number", name:"wolves" },
		{ id:"CCC", type:"number", name:"encounters" },
		{ id:"DDD", type:"number", name:"rabbits eaten" },
		{ id:"EEE", type:"number", name:"wolf growth" },
	],
	start:[
		{ type:"set_num", _set_:"AAA", value:100 },
		{ type:"set_num", _set_:"BBB", value:50 },
	],
	cycles: 500, // graph over this many cycles
	cycle:[
		{ type:"mod_num", _set_:{_ref_:"AAA"}, op:"×", value:1.05 }, // rabbits multiply
		{ type:"mod_num", _set_:{_ref_:"BBB"}, op:"×", value:0.95 }, // wolves decay

		{ type:"do_math", _set_:"CCC", op:"×", a:{_get_:"AAA"}, b:{_get_:"BBB"} },
		{ type:"do_math", _set_:"DDD", op:"×", a:0.001, b:{_get_:"CCC"} },
		{ type:"do_math", _set_:"EEE", op:"×", a:1, b:{_get_:"DDD"} },

		{ type:"mod_num", _set_:{_ref_:"AAA"}, op:"-", value:{_get_:"DDD"} }, // rabbits get eaten
		{ type:"mod_num", _set_:{_ref_:"BBB"}, op:"+", value:{_get_:"EEE"} } // wolves grow

	]
});

</script>