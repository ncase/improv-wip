<!doctype>
<html>
<head>
	<title>variables!</title>
	<link rel="stylesheet" type="text/css" href="../../dist/improv-default.css">
</head>
<body>

<div id="editor">
Do the math:
{ACTIONS math}
</div>

<hr>

<div id="output"></div>

</body>
</html>

<!-- IMPROV.JS -->
<script src="../../dist/improv.js"></script>
<script src="../../dist/improv-widgets.js"></script>
<script src="../../dist/improv-widgets-vars.js"></script>

<!-- Test -->
<script>

Improv.actions.set_num = {
	label: "Create a number...",
	editor: "The number of {VAR _set_: type=number,name=something} is {NUM value}",
	act: function(obj,args){
		Improv.setVar(obj, args._set_, args.value);
	}
};

Improv.actions.add_num = {
	label: "Do math to two numbers...",
	editor: "The number of {VAR _set_: type=number,name=something} is {NUM a} {CHOOSE op: +,-,×,÷} {NUM b}",
	act: function(obj,args){
		var val;
		switch(args.op){
			case "+": val=args.a+args.b; break;
			case "-": val=args.a-args.b; break;
			case "×": val=args.a*args.b; break;
			case "÷": val=args.a/args.b; break;
		}
		Improv.setVar(obj, args._set_, val);
	}
};

Improv.actions.print = {
	label: "Print a number",
	editor: "Print {NUM value}",
	act: function(obj,args){
		output.innerHTML += "<br>" + args.value;
	}
};

var logic = {
	_vars_:[
		{ id:"AAA", type:"number", name:"apples" },
		{ id:"BBB", type:"number", name:"oranges" },
		{ id:"CCC", type:"number", name:"fruit" }
	],
	math:[
		{ type:"set_num", _set_:"AAA", value:2 },
		{ type:"set_num", _set_:"BBB", value:3 },
		{ type:"add_num", _set_:"CCC", op:"+", a:{_get_:"AAA"}, b:{_get_:"BBB"} },
		{ type:"print", value:{_get_:"CCC"} }
	]
};

// Loop!
var workspace;
var output = document.getElementById("output");
setInterval(function(){

	workspace = {};
	output.innerHTML = "";
	Improv.act(workspace, logic.math);

},1000/30);

// Start!
Improv.edit(logic,"#editor");

// Do a cars & CO2 example, why not.
// It's Tangle so far.
// Demos... YouTube 'em, Vimeo 'em???
// Patreon post?

</script>